<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <link rel="icon" type="image/png" href="images/favicon.png">
  <meta name="viewport" meta content="width=devise-width, initial-scale=1">
  <meta name="description" content="これはHTMLCSSの課題作品です。">
  <meta name="robots" content="noindex, nofollow">
  <title>出石に行こう</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.1.2/css/all.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
</head>

<body>
  <header class="page-header wrapper">
    <h1>
      <a href="index.html">
        <img class="logo" src="images/logo.jpg" alt="出石案内ホーム" title="そうだ！出石へ行こう！">
      </a>
    </h1>
    <nav>
      <ul class="main-nav">
        <li><a href="enjoy.html">あそぶ</a></li>
        <li><a href="eat.html">たべる</a></li>
        <li><a href="sightseeing.html">みる</a></li>
        <li><a href="souvenir.html">かう</a></li>
        <li><a href="access.html">いく</a></li>
      </ul>
    </nav>
    <!-- ここまでほぼ共通部分 id名のみ変更 -->
  </header>

  <section>
    <div class="slide">
      <div id="finder">
        <div class="img-box">
          <img class="main-img" src="images/sMs_sakagura.jpg">
          <img class="main-img" src="images/sM_sukyoji.jpg">
          <img class="main-img" src="images/sMs_castle.jpg">
        </div>
      </div>
      <div id="caption-area">
        宗鏡寺の紅葉
      </div>
      <div class="toolbar">
        <div class="bar-nav">
          <div id="prev"><i class="fa-sharp fa-solid fa-backward"></i></div>
          <div id="page"></div>
          <div id="next"><i class="fa-solid fa-forward"></i></div>
        </div>
      </div>
    </div>
  </section>
  <p></p>


  <!-- ここから共通 Footer -->
  <footer>
    <div class="wrapper">
      <p>
        <small>&copy; 2022 hhhyyysss </small>
      </p>
    </div>
  </footer>

  <!-- ページ上に戻るボタン -->
  <div id="gotop">
    <a href="#">
      <i class="fa-solid fa-chevron-up"></i>
    </a>
  </div>

  <script>
    'use strict';

    const images = [
      'images/sM_sukyoji.jpg',
      'images/sMs_castle.jpg',
      'images/sMs_karouyashiki.jpg',
      'images/sMs_eirakukan.jpg',
      'images/sMs_sakagura.jpg',
    ];

    const captions = [
      '宗鏡寺の紅葉',
      '出石城跡からの眺め',
      '見学できる希少な家老屋敷',
      '日本最古の芝居小屋 永楽館',
      '出石酒造の酒蔵',
    ];
    let current = 0;

    // ********* next arrow を押したときの動作 ******************** //

    function deleteLeftImage() {
      document.querySelector('.img-box').firstElementChild.remove();
    }

    function addRightImage() {
      let count = current + 1;
      if (count > 4) count = 0;
      // current = current + 1;
      // if (current < 0) current = images.length - 1;
      const image = `<img src=${images[count]} alt="" class="main-img">`;
      document.querySelector('.img-box').insertAdjacentHTML('beforeend', image);
    }

    function moveToLeft() {
      deleteLeftImage();
      document.querySelector('.img-box').style.transition = 'none';
      document.querySelector('.img-box').style.marginLeft = '0';
      current += 1;
      if (current > images.length - 1) current = 0;
      setTimeout(function () {
        addRightImage();
        document.querySelector('.img-box').style.transition = 'margin-left 1s ease';
        document.querySelector('.img-box').style.marginLeft = '-720px';
      });
    }

    function addRightWord() {
      // count = text_current + 1;
      // if (count > 0) count += 1;
      console.log(current);
      document.getElementById('caption-area').textContent = `${captions[current]}`;
    }

    function pageNum() {
      document.getElementById('page').textContent
        = `${current + 1} / ${images.length}`;
    }

    document.querySelector('#next').onclick = function () {
      moveToLeft();
      addRightWord();
      pageNum();
    }

    // ********* prev arrow を押したときの動作 ******************** //

    function deleteRightImage() {
      document.querySelector('.img-box').lastElementChild.remove();
    }

    function addLeftImage() {
      // let count = current - 1;
      // if (count < 0) count = images.length - 1;
      const image = `<img src=${images[count]} alt="" class="main-img">`;
      document.querySelector('.img-box').insertAdjacentHTML('afterbegin', image);
    }

    function moveToRight() {
      deleteRightImage();
      document.querySelector('.img-box').style.transition = 'margin-left 1s ease';
      document.querySelector('.img-box').style.marginLeft = '0';
      current -= 1;
      if (current < 0) current = images.length - 1;
      setTimeout(function () {
        addLeftImage();
        pageNum(); document.querySelector('.img-box').style.transition = 'none';
        document.querySelector('.img-box').style.marginLeft = '-720px';
      }, 1000);
    }

    document.querySelector('#prev').onclick = function () {
      moveToRight();
      addLeftWord();
      pageNum();
    }

    pageNum();

    // function changeImage(num) {
    //   if (current + num >= 0 && current + num < images.length) {
    //     current += num;
    //     document.getElementById('main-img').src = images[current];
    //     pageNum();
    //   }
    // };


    // document.getElementById('prev').onclick = function () {
    //   changeImage(-1);
    // };

    // document.getElementById('next').onclick = function () {
    //   changeImage(1);
    // };
  </script>
</body>

</html>